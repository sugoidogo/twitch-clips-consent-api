var o=class{authProvider;constructor(e){this.authProvider=e}getShortConsentURL(){return new URL(import.meta.url,"/consent").href}getLongConsentURL(){let e=new URL("https://id.twitch.tv/oauth2/authorize");return e.searchParams.append("client_id",this.authProvider.clientId),e.searchParams.append("response_type","code"),e.searchParams.append("scope","channel:manage:clips"),e.href+"redirect_uri="+this.getShortConsentURL()}async getClipDownloads(e="0",...n){let s=await this.authProvider.getAnyAccessToken(),r=new Headers;r.append("client-id",this.authProvider.clientId),r.append("authorization","OAuth "+s.accessToken);let t=new URL(import.meta.url,"/clip");t.searchParams.append("broadcaster_id",e);for(let i of n)t.searchParams.append("clip_id",i);let a=await fetch(t,{headers:r});if(a.status!=200)throw new Error(a.statusText,{cause:a});return a.json()}async getClips(e){let n=await this.authProvider.getAnyAccessToken(),s=new Headers;s.append("client-id",this.authProvider.clientId),s.append("authorization","OAuth "+n.accessToken);let r=new URL(import.meta.url,"/clip"),t;for(t in e)r.searchParams.append(t,String(e[t]));return(await fetch(r,{headers:s})).json()}};export{o as default};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidHd1cnBsZS1jbGlwLWNvbnNlbnQudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB0eXBlIHsgR2V0Q2xpcHNQYXJhbXMsIEdldENsaXBzUmVzcG9uc2UgfSBmcm9tIFwidHMtdHdpdGNoLWFwaVwiXG5pbXBvcnQgeyBBdXRoUHJvdmlkZXIgfSBmcm9tIFwiQHR3dXJwbGUvYXV0aFwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENsaXBDb25zZW50IHtcbiAgICBhdXRoUHJvdmlkZXI6IEF1dGhQcm92aWRlclxuICAgIGNvbnN0cnVjdG9yKGF1dGhQcm92aWRlcjogQXV0aFByb3ZpZGVyKSB7XG4gICAgICAgIHRoaXMuYXV0aFByb3ZpZGVyID0gYXV0aFByb3ZpZGVyXG4gICAgfVxuICAgIGdldFNob3J0Q29uc2VudFVSTCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVUkwoaW1wb3J0Lm1ldGEudXJsLCAnL2NvbnNlbnQnKS5ocmVmXG4gICAgfVxuICAgIGdldExvbmdDb25zZW50VVJMKCkge1xuICAgICAgICBjb25zdCBhdXRoX3VyaSA9IG5ldyBVUkwoJ2h0dHBzOi8vaWQudHdpdGNoLnR2L29hdXRoMi9hdXRob3JpemUnKVxuICAgICAgICBhdXRoX3VyaS5zZWFyY2hQYXJhbXMuYXBwZW5kKCdjbGllbnRfaWQnLCB0aGlzLmF1dGhQcm92aWRlci5jbGllbnRJZClcbiAgICAgICAgYXV0aF91cmkuc2VhcmNoUGFyYW1zLmFwcGVuZCgncmVzcG9uc2VfdHlwZScsICdjb2RlJylcbiAgICAgICAgYXV0aF91cmkuc2VhcmNoUGFyYW1zLmFwcGVuZCgnc2NvcGUnLCAnY2hhbm5lbDptYW5hZ2U6Y2xpcHMnKVxuICAgICAgICByZXR1cm4gYXV0aF91cmkuaHJlZiArICdyZWRpcmVjdF91cmk9JyArIHRoaXMuZ2V0U2hvcnRDb25zZW50VVJMKClcbiAgICB9XG4gICAgYXN5bmMgZ2V0Q2xpcERvd25sb2Fkcyhicm9hZGNhc3Rlcl9pZCA9ICcwJywgLi4uY2xpcF9pZDogc3RyaW5nW10pIHtcbiAgICAgICAgY29uc3QgYXV0aG9yaXphdGlvbiA9IGF3YWl0IHRoaXMuYXV0aFByb3ZpZGVyLmdldEFueUFjY2Vzc1Rva2VuKClcbiAgICAgICAgY29uc3QgcmVxdWVzdEhlYWRlcnMgPSBuZXcgSGVhZGVycygpXG4gICAgICAgIHJlcXVlc3RIZWFkZXJzLmFwcGVuZCgnY2xpZW50LWlkJywgdGhpcy5hdXRoUHJvdmlkZXIuY2xpZW50SWQpXG4gICAgICAgIHJlcXVlc3RIZWFkZXJzLmFwcGVuZCgnYXV0aG9yaXphdGlvbicsICdPQXV0aCAnICsgYXV0aG9yaXphdGlvbi5hY2Nlc3NUb2tlbilcbiAgICAgICAgY29uc3QgcmVxdWVzdFVSTCA9IG5ldyBVUkwoaW1wb3J0Lm1ldGEudXJsLCAnL2NsaXAnKVxuICAgICAgICByZXF1ZXN0VVJMLnNlYXJjaFBhcmFtcy5hcHBlbmQoJ2Jyb2FkY2FzdGVyX2lkJywgYnJvYWRjYXN0ZXJfaWQpXG4gICAgICAgIGZvciAoY29uc3QgYV9jbGlwX2lkIG9mIGNsaXBfaWQpIHtcbiAgICAgICAgICAgIHJlcXVlc3RVUkwuc2VhcmNoUGFyYW1zLmFwcGVuZCgnY2xpcF9pZCcsIGFfY2xpcF9pZClcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHJlcXVlc3RVUkwsIHsgaGVhZGVyczogcmVxdWVzdEhlYWRlcnMgfSlcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPSAyMDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0LCB7IGNhdXNlOiByZXNwb25zZSB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgICB9XG4gICAgYXN5bmMgZ2V0Q2xpcHMocGFyYW1zOiBHZXRDbGlwc1BhcmFtcyk6IFByb21pc2U8R2V0Q2xpcHNSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCBhdXRob3JpemF0aW9uID0gYXdhaXQgdGhpcy5hdXRoUHJvdmlkZXIuZ2V0QW55QWNjZXNzVG9rZW4oKVxuICAgICAgICBjb25zdCByZXF1ZXN0SGVhZGVycyA9IG5ldyBIZWFkZXJzKClcbiAgICAgICAgcmVxdWVzdEhlYWRlcnMuYXBwZW5kKCdjbGllbnQtaWQnLCB0aGlzLmF1dGhQcm92aWRlci5jbGllbnRJZClcbiAgICAgICAgcmVxdWVzdEhlYWRlcnMuYXBwZW5kKCdhdXRob3JpemF0aW9uJywgJ09BdXRoICcgKyBhdXRob3JpemF0aW9uLmFjY2Vzc1Rva2VuKVxuICAgICAgICBjb25zdCByZXF1ZXN0VVJMID0gbmV3IFVSTChpbXBvcnQubWV0YS51cmwsICcvY2xpcCcpXG4gICAgICAgIGxldCBrZXk6IGtleW9mIHR5cGVvZiBwYXJhbXNcbiAgICAgICAgZm9yIChrZXkgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICByZXF1ZXN0VVJMLnNlYXJjaFBhcmFtcy5hcHBlbmQoa2V5LCBTdHJpbmcocGFyYW1zW2tleV0pKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocmVxdWVzdFVSTCwgeyBoZWFkZXJzOiByZXF1ZXN0SGVhZGVycyB9KVxuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXG4gICAgfVxufSJdLAogICJtYXBwaW5ncyI6ICJBQUdBLElBQXFCQSxFQUFyQixLQUFpQyxDQUM3QixhQUNBLFlBQVlDLEVBQTRCLENBQ3BDLEtBQUssYUFBZUEsQ0FDeEIsQ0FDQSxvQkFBcUIsQ0FDakIsT0FBTyxJQUFJLElBQUksWUFBWSxJQUFLLFVBQVUsRUFBRSxJQUNoRCxDQUNBLG1CQUFvQixDQUNoQixJQUFNQyxFQUFXLElBQUksSUFBSSx1Q0FBdUMsRUFDaEUsT0FBQUEsRUFBUyxhQUFhLE9BQU8sWUFBYSxLQUFLLGFBQWEsUUFBUSxFQUNwRUEsRUFBUyxhQUFhLE9BQU8sZ0JBQWlCLE1BQU0sRUFDcERBLEVBQVMsYUFBYSxPQUFPLFFBQVMsc0JBQXNCLEVBQ3JEQSxFQUFTLEtBQU8sZ0JBQWtCLEtBQUssbUJBQW1CLENBQ3JFLENBQ0EsTUFBTSxpQkFBaUJDLEVBQWlCLE9BQVFDLEVBQW1CLENBQy9ELElBQU1DLEVBQWdCLE1BQU0sS0FBSyxhQUFhLGtCQUFrQixFQUMxREMsRUFBaUIsSUFBSSxRQUMzQkEsRUFBZSxPQUFPLFlBQWEsS0FBSyxhQUFhLFFBQVEsRUFDN0RBLEVBQWUsT0FBTyxnQkFBaUIsU0FBV0QsRUFBYyxXQUFXLEVBQzNFLElBQU1FLEVBQWEsSUFBSSxJQUFJLFlBQVksSUFBSyxPQUFPLEVBQ25EQSxFQUFXLGFBQWEsT0FBTyxpQkFBa0JKLENBQWMsRUFDL0QsUUFBV0ssS0FBYUosRUFDcEJHLEVBQVcsYUFBYSxPQUFPLFVBQVdDLENBQVMsRUFFdkQsSUFBTUMsRUFBVyxNQUFNLE1BQU1GLEVBQVksQ0FBRSxRQUFTRCxDQUFlLENBQUMsRUFDcEUsR0FBSUcsRUFBUyxRQUFVLElBQ25CLE1BQU0sSUFBSSxNQUFNQSxFQUFTLFdBQVksQ0FBRSxNQUFPQSxDQUFTLENBQUMsRUFFNUQsT0FBT0EsRUFBUyxLQUFLLENBQ3pCLENBQ0EsTUFBTSxTQUFTQyxFQUFtRCxDQUM5RCxJQUFNTCxFQUFnQixNQUFNLEtBQUssYUFBYSxrQkFBa0IsRUFDMURDLEVBQWlCLElBQUksUUFDM0JBLEVBQWUsT0FBTyxZQUFhLEtBQUssYUFBYSxRQUFRLEVBQzdEQSxFQUFlLE9BQU8sZ0JBQWlCLFNBQVdELEVBQWMsV0FBVyxFQUMzRSxJQUFNRSxFQUFhLElBQUksSUFBSSxZQUFZLElBQUssT0FBTyxFQUMvQ0ksRUFDSixJQUFLQSxLQUFPRCxFQUNSSCxFQUFXLGFBQWEsT0FBT0ksRUFBSyxPQUFPRCxFQUFPQyxDQUFHLENBQUMsQ0FBQyxFQUczRCxPQURpQixNQUFNLE1BQU1KLEVBQVksQ0FBRSxRQUFTRCxDQUFlLENBQUMsR0FDcEQsS0FBSyxDQUN6QixDQUNKIiwKICAibmFtZXMiOiBbIkNsaXBDb25zZW50IiwgImF1dGhQcm92aWRlciIsICJhdXRoX3VyaSIsICJicm9hZGNhc3Rlcl9pZCIsICJjbGlwX2lkIiwgImF1dGhvcml6YXRpb24iLCAicmVxdWVzdEhlYWRlcnMiLCAicmVxdWVzdFVSTCIsICJhX2NsaXBfaWQiLCAicmVzcG9uc2UiLCAicGFyYW1zIiwgImtleSJdCn0K
